<header class="masthead">
  <div class="masthead-wrap">
    <div class="masthead-text">
      <a class="site-title-link" href="{{ '/' | relative_url }}">{{ site.title | strip }}</a>

      <span class="site-tagline">
        <small class="masthead-subtitle">{{ site.description | strip }}</small>

       {% comment %}
Safe logo resolver:
- Works if page.header_image is a string path
- Works if page.header_image is an object with src/alt/width/height
- Falls back to site.logo.*
- Never passes a Hash to filters
{% endcomment %}

{% assign logo_src = page.header_image.src | default: page.header_image | default: site.logo.src %}
{% assign logo_alt = page.header_image.alt | default: site.logo.alt | default: 'Site badge' %}
{% assign logo_w   = page.header_image.width  | default: site.logo.width  | default: 40 %}
{% assign logo_h   = page.header_image.height | default: site.logo.height | default: 40 %}

{% if logo_src and logo_src != '' %}
  <img
    class="desc-badge"
    src="{{ logo_src | relative_url | escape }}"
    alt="{{ logo_alt }}"
    width="{{ logo_w }}"
    height="{{ logo_h }}"
    loading="lazy"
    decoding="async">
{% endif %}


        {% if logo_src and logo_src != '' %}
          <img
            class="desc-badge"
            src="{{ logo_src | relative_url | escape }}"
            alt="{{ logo_alt | default: 'Site badge' }}"
            width="{{ logo_w  | default: 40 }}"
            height="{{ logo_h | default: 40 }}"
            loading="lazy"
            decoding="async">
        {% endif %}
      </span>
    </div>

    {% include menu.html %}
  </div>
</header>
